<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lagom</title>
</head>
<body>
    <a href="lagom://">Open in app</a>

    <script>
        function handleDeeplink(deeplink, schemes = ['lagom://']) {
            const parseQueryParams = (url) => {
                const queryParams = {};
                const urlSearchParams = new URLSearchParams(new URL(url).search);
                for (const [key, value] of urlSearchParams.entries()) {
                    queryParams[key] = value;
                }
                return queryParams;
            };

            const attemptRedirect = () => {
                const queryParams = parseQueryParams(deeplink);
                window.location.href = deeplink;
            };

            setInterval(attemptRedirect, 1000);
        }

        document.addEventListener('DOMContentLoaded', function () {
            handleDeeplink(window.location.href);
        });
    </script>
</body>
</html>
